{% extends 'base.html' %}

{% block content %}
  <main class="py-5 m-5">
    <div class="row mt-5 justify-content-center">
      <div style="max-width: 40rem;">
        <form class="card card-body" method="POST" enctype="multipart/form-data" style="background-color: rgb(255, 255, 255, 0.8);">
          <h1 class="mb-4">Registrar proveedor</h1>

          {{ error }}

          {% csrf_token %}

          <!-- Es migracion field -->
          <div style="margin-bottom:1rem;">
            <p><b>En caso de que el proveedor ya exista en otra empresa, marque la siguiente casilla:</b></p>
            {{ form.es_migracion.label_tag }}
            {{ form.es_migracion }}
            <p id="error-es-migracion" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
          </div>

          <!-- Proveedor migración fields -->
          <div id="proveedor-migracion-fields" style="display: none; margin-bottom:1rem;">
            <div id="proveedor-migracion-empresas" style="display: flex; gap: 1rem; margin-bottom: 1rem;">
              <!-- Empresa origen -->
              <div style="width: 100%;">
                <p class="m-0">{{ form.empresa_origen.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.empresa_origen }}
                <p id="error-empresa-origen" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>

              <!-- Empresa destino -->
              <div style="width: 100%;">
                <p class="m-0">{{ form.empresa_destino.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>asd
                {{ form.empresa_destino }}
                <p id="error-empresa-destino" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <!-- RFC migracion field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.rfc_migracion.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.rfc_migracion }}
              <p id="error-rfc-migracion" style="color:red; margin-bottom:0; display:none;">Ingrese un RFC válido</p>
            </div>
          </div>

          <!-- Proveedor nuevo fields -->
          <div id="proveedor-nuevo-fields" style="display: block;">

            <!-- Empresa field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.empresa.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.empresa }}
              <p id="error-empresa" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Tipo alta field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.tipo_alta.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.tipo_alta }}
                <p id="error-tipo-alta" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>

              <!-- Contribuyente field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.contribuyente.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.contribuyente }}
                <p id="error-contribuyente" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- RFC field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.rfc.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.rfc }}
                <p id="error-rfc" style="color:red; margin-bottom:0; display:none;">Ingrese un RFC válido</p>
              </div>

              <!-- CURP field -->
              <div style="width: 100%; margin-bottom:1rem;">
                {{ form.curp.label_tag }}
                {{ form.curp }}
                <p id="error-curp" style="color:red; margin-bottom:0; display:none;">Ingrese una CURP válida</p>
              </div>
            </div>

            <!-- Nombre fiscal field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.nombre_fiscal.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.nombre_fiscal }}
              <p id="error-nombre-fiscal" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
            </div>

            <!-- Regimen de capital field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.regimen_capital.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.regimen_capital }}
              <p id="error-regimen-capital" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <!-- Nombre comercial field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.nombre_comercial.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.nombre_comercial }}
              <p id="error-nombre-comercial" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
            </div>

            <!-- Regimen fiscal field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.regimen_fiscal.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.regimen_fiscal }}
              <p id="error-regimen-fiscal" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <!-- Uso cfdi field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.uso_cfdi.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.uso_cfdi }}
              <p id="error-uso-cfdi" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Telefono 1 field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.telefono_1.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.telefono_1 }}
                <p id="error-telefono-1" style="color:red; margin-bottom:0; display:none;">Ingrese un número a 10 dígitos</p>
              </div>

              <!-- Telefono 2 field -->
              <div style="width: 100%; margin-bottom:1rem;">
                {{ form.telefono_2.label_tag }}
                {{ form.telefono_2 }}
                <p id="error-telefono-2" style="color:red; margin-bottom:0; display:none;">Ingrese un número a 10 dígitos</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Representante legal field -->
              <div style="width: 100%; margin-bottom:1rem;">
                {{ form.representante_legal.label_tag }}
                {{ form.representante_legal }}
                <p id="error-representante-legal" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Contacto field -->
              <div style="width: 100%; margin-bottom:1rem;">
                {{ form.contacto.label_tag }}
                {{ form.contacto }}
                <p id="error-contacto" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Correo general field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.correo_general.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.correo_general }}
                <p id="error-correo-general" style="color:red; margin-bottom:0; display:none;">Ingrese un correo electrónico válido</p>
              </div>

              <!-- Correo pagos field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.correo_pagos.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.correo_pagos }}
                <p id="error-correo-pagos" style="color:red; margin-bottom:0; display:none;">Ingrese un correo electrónico válido</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Sitio web field -->
              <div style="width: 100%; margin-bottom:1rem;">
                {{ form.sitio_web.label_tag }}
                {{ form.sitio_web }}
                <p id="error-sitio-web" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Rubro field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">Grupo / {{ form.rubro.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.rubro }}
                <p id="error-rubro" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Tipo operacion field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.tipo_operacion.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.tipo_operacion }}
                <p id="error-tipo-operacion" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>

              <!-- Tipo tercero field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.tipo_tercero.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.tipo_tercero }}
                <p id="error-tipo-tipo-tercero" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- id fiscal field -->
              <div style="width: 100%; margin-bottom:1rem;">
                {{ form.id_fiscal.label_tag }}
                {{ form.id_fiscal }}
                <p id="error-id-fiscal" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Agente aduanal field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.agente_aduanal.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.agente_aduanal }}
                <p id="error-agente-aduanal" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Limite credito MN field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.limite_credito_MN.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.limite_credito_MN }}
                <p id="error-limite-credito-MN" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
              
              <!-- Limite credito ME field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.limite_credito_ME.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.limite_credito_ME }}
                <p id="error-limite-credito-ME" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Dias credito field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.dias_credito.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.dias_credito }}
                <p id="error-dias-credito" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Monto credito field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.monto_credito.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.monto_credito }}
                <p id="error-monto-credito" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Retencion iva field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.retencion_iva.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.retencion_iva }}
                <p id="error-retencion-iva" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>

              <!-- Retencion isr field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.retencion_isr.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.retencion_isr }}
                <p id="error-retencion-isr" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>

              <!-- Iva frontera field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.iva_frontera.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.iva_frontera }}
                <p id="error-iva-frontera" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Codigo postal field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.codigo_postal.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.codigo_postal }}
                <p id="error-codigo-postal" style="color:red; margin-bottom:0; display:none;">Ingrese un código postal válido</p>
              </div>

              <!-- Pais field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.pais.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.pais }}
                <p id="error-pais" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Estado field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.estado.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.estado }}
                <p id="error-estado" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Ciudad field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.ciudad.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.ciudad }}
                <p id="error-ciudad" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Municipio field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.municipio.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.municipio }}
                <p id="error-municipio" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Localidad field -->
              <div style="width: 100%; margin-bottom:1rem;">
                <p class="m-0">{{ form.localidad.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.localidad }}
                <p id="error-localidad" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <!-- Colonia field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.colonia.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.colonia }}
              <p id="error-colonia" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
            </div>

            <!-- Calle field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.calle.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.calle }}
              <p id="error-calle" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Numero exterior field -->
              <div style="width: 50%; margin-bottom:1rem;">
                <p class="m-0">{{ form.numero_exterior.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.numero_exterior }}
                <p id="error-numero-exterior" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Numero interior field -->
              <div style="width: 50%; margin-bottom:1rem;">
                {{ form.numero_interior.label_tag }}
                {{ form.numero_interior }}
                <p id="error-numero-interior" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <!-- Banco field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.banco.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.banco }}
              <p id="error-banco" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Cuenta field -->
              <div style="width: 40%; margin-bottom:1rem;">
                <p class="m-0">{{ form.cuenta.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.cuenta }}
                <p id="error-cuenta" style="color:red; margin-bottom:0; display:none;">Ingrese un número de cuenta a 10 dígitos</p>
              </div>

              <!-- Clabe field -->
              <div style="width: 40%; margin-bottom:1rem;">
                <p class="m-0">{{ form.clabe.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.clabe }}
                <p id="error-clabe" style="color:red; margin-bottom:0; display:none;">Ingrese un número de cuenta a 18 dígitos</p>
              </div>

              <!-- Moneda field -->
              <div style="width: 20%; margin-bottom:1rem;">
                <p class="m-0">{{ form.moneda.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.moneda }}
                <p id="error-moneda" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem;">
              <!-- Swift field -->
              <div style="width: 50%; margin-bottom:1rem;">
                {{ form.swift.label_tag }}
                {{ form.swift }}
                <p id="error-swift" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>

              <!-- Otro codigo bancario field -->
              <div style="width: 50%; margin-bottom:1rem;">
                {{ form.otro_codigo_bancario.label_tag }}
                {{ form.otro_codigo_bancario }}
                <p id="error-otro-codigo-bancario" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
              </div>
            </div>

            <!-- Container for banco 2 fields -->
            <div id="banco-2-container" style="display:none;">
              <hr />
              <!-- Banco 2 field -->
              <div style="margin-bottom:1rem;">
                <p class="m-0">{{ form.banco_2.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                {{ form.banco_2 }}
                <p id="error-banco-2" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
              </div>

              <div style="display: flex; gap: 1rem;">
                <!-- Cuenta 2 field -->
                <div style="width: 40%; margin-bottom:1rem;">
                  <p class="m-0">{{ form.cuenta_2.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                  {{ form.cuenta_2 }}
                  <p id="error-cuenta-2" style="color:red; margin-bottom:0; display:none;">Ingrese un número de cuenta a 10 dígitos</p>
                </div>

                <!-- Clabe 2 field -->
                <div style="width: 40%; margin-bottom:1rem;">
                  <p class="m-0">{{ form.clabe_2.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                  {{ form.clabe_2 }}
                  <p id="error-clabe-2" style="color:red; margin-bottom:0; display:none;">Ingrese un número de cuenta a 18 dígitos</p>
                </div>

                <!-- Moneda 2 field -->
                <div style="width: 20%; margin-bottom:1rem;">
                  <p class="m-0">{{ form.moneda_2.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
                  {{ form.moneda_2 }}
                  <p id="error-moneda-2" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
                </div>
              </div>

              <div style="display: flex; gap: 1rem;">
                <!-- Swift 2 field -->
                <div style="width: 50%; margin-bottom:1rem;">
                  {{ form.swift_2.label_tag }}
                  {{ form.swift_2 }}
                  <p id="error-swift_2" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
                </div>
  
                <!-- Otro codigo bancario 2 field -->
                <div style="width: 50%; margin-bottom:1rem;">
                  {{ form.otro_codigo_bancario_2.label_tag }}
                  {{ form.otro_codigo_bancario_2 }}
                  <p id="error-otro-codigo-bancario_2" style="color:red; margin-bottom:0; display:none;">Este campo es requerido</p>
                </div>
              </div>
            </div>

            <button class="btn btn-secondary mb-3" type="button" id="add-banco-2">Agregar otro banco</button>

            <!-- Usar en portal proveedores field -->
            <div style="margin-bottom:1rem;">
              {{ form.usar_en_portal_proveedores.label_tag }}
              {{ form.usar_en_portal_proveedores }}
              <p id="error-usar-en-portal-proveedores" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <!-- No aplica para rafaga field -->
            <div style="margin-bottom:1rem;">
              {{ form.no_aplica_para_rafaga.label_tag }}
              {{ form.no_aplica_para_rafaga }}
              <p id="error-no-aplica-para-rafaga" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <!-- No relacionar OC field -->
            <div style="margin-bottom:1rem;">
              {{ form.no_relacionar_OC.label_tag }}
              {{ form.no_relacionar_OC }}
              <p id="error-no-relacionar-OC" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <!-- Constancia situacion fiscal field -->
            <div style="margin-bottom:1rem;">
              <p class="m-0">{{ form.constancia_situacion_fiscal.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.constancia_situacion_fiscal }}
              <p id="error-constancia-situacion-fiscal" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>

            <!-- Estado cuenta bancario field -->
            <div style="margin-bottom:2rem;">
              <p class="m-0">{{ form.estado_cuenta_bancario.label_tag }}<span style="color: rgb(192, 0, 0);">*</span></p>
              {{ form.estado_cuenta_bancario }}
              <p id="error-estado-cuenta-bancario" style="color:red; margin-bottom:0; display:none;">Seleccione una opción válida</p>
            </div>
          </div>

          <button id="btn-guardar" class="btn" type="submit" value="True" style="background-color: #008841; color: white; font-weight: bold;">Guardar</button>
        </form>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Containers
      const banco2Container = document.getElementById('banco-2-container')
      const proveedorNuevoFields = document.getElementById('proveedor-nuevo-fields')
      const proveedorMigracionFields = document.getElementById('proveedor-migracion-fields')

      // Inputs
      const esMigracion = document.getElementById('id_es_migracion')
      const empresaOrigen = document.getElementById('id_empresa_origen')
      const empresaDestino = document.getElementById('id_empresa_destino')
      const rfcMigracion = document.getElementById('id_rfc_migracion')
      const empresa = document.getElementById('id_empresa')
      const tipoAlta = document.getElementById('id_tipo_alta')
      const contribuyente = document.getElementById('id_contribuyente')
      const rfc = document.getElementById('id_rfc')
      const curp = document.getElementById('id_curp')
      const regimenCapital = document.getElementById('id_regimen_capital')
      const nombreFiscal = document.getElementById('id_nombre_fiscal')
      const nombreComercial = document.getElementById('id_nombre_comercial')
      const regimenFiscal = document.getElementById('id_regimen_fiscal')
      const usoCfdi = document.getElementById('id_uso_cfdi')
      const representanteLegal = document.getElementById('id_representante_legal')
      const telefono1 = document.getElementById('id_telefono_1')
      const telefono2 = document.getElementById('id_telefono_2')
      const contacto = document.getElementById('id_contacto')
      const correoGeneral = document.getElementById('id_correo_general')
      const correoPagos = document.getElementById('id_correo_pagos')
      const sitioWeb = document.getElementById('id_sitio_web')
      const rubro = document.getElementById('id_rubro')
      const tipoOperacion = document.getElementById('id_tipo_operacion')
      const tipoTercero = document.getElementById('id_tipo_tercero')
      const idFiscal = document.getElementById('id_id_fiscal')
      const agenteAduanal = document.getElementById('id_agente_aduanal')
      const limiteCreditoMN = document.getElementById('id_limite_credito_MN')
      const limiteCreditoME = document.getElementById('id_limite_credito_ME')
      const diasCredito = document.getElementById('id_dias_credito')
      const montoCredito = document.getElementById('id_monto_credito')
      const retencionIva = document.getElementById('id_retencion_iva')
      const retencionIsr = document.getElementById('id_retencion_isr')
      const ivaFrontera = document.getElementById('id_iva_frontera')
      const codigoPostal = document.getElementById('id_codigo_postal')
      const pais = document.getElementById('id_pais')
      const estado = document.getElementById('id_estado')
      const ciudad = document.getElementById('id_ciudad')
      const municipio = document.getElementById('id_municipio')
      const localidad = document.getElementById('id_localidad')
      const colonia = document.getElementById('id_colonia')
      const calle = document.getElementById('id_calle')
      const numeroExterior = document.getElementById('id_numero_exterior')
      const numeroInterior = document.getElementById('id_numero_interior')
      const banco = document.getElementById('id_banco')
      const cuenta = document.getElementById('id_cuenta')
      const moneda = document.getElementById('id_moneda')
      const clabe = document.getElementById('id_clabe')
      const banco2 = document.getElementById('id_banco_2')
      const cuenta2 = document.getElementById('id_cuenta_2')
      const moneda2 = document.getElementById('id_moneda_2')
      const clabe2 = document.getElementById('id_clabe_2')
      const usarEnPortalProveedores = document.getElementById('id_usar_en_portal_proveedores')
      const noAplicaParaRafaga = document.getElementById('id_no_aplica_para_rafaga')
      const noRelacionarOc = document.getElementById('id_no_relacionar_OC')
      const constanciaSituacionFiscal = document.getElementById('id_constancia_situacion_fiscal')
      const estadoCuentaBancario = document.getElementById('id_estado_cuenta_bancario')

      // Buttons
      const addBanco = document.getElementById('add-banco-2')
      const btnGuardar = document.getElementById('btn-guardar')
      
      // Error messages
      const errorEmpresaOrigen = document.getElementById('error-empresa-origen')
      const errorEmpresaDestino = document.getElementById('error-empresa-destino')
      const errorRfcMigracion = document.getElementById('error-rfc-migracion')
      const errorEmpresa = document.getElementById('error-empresa')
      const errorTipoAlta = document.getElementById('error-tipo-alta')
      const errorContribuyente = document.getElementById('error-contribuyente')
      const errorRfc = document.getElementById('error-rfc')
      const errorCurp = document.getElementById('error-curp')
      const errorRegimenCapital = document.getElementById('error-regimen-capital')
      const errorNombreFiscal = document.getElementById('error-nombre-fiscal')
      const errorNombreComercial = document.getElementById('error-nombre-comercial')
      const errorRegimenFiscal = document.getElementById('error-regimen-fiscal')
      const errorUsoCfdi = document.getElementById('error-uso-cfdi')
      const errorRepresentanteLegal = document.getElementById('error-representante-legal')
      const errorTelefono1 = document.getElementById('error-telefono-1')
      const errorTelefono2 = document.getElementById('error-telefono-2')
      const errorContacto = document.getElementById('error-contacto')
      const errorCorreoGeneral = document.getElementById('error-correo-general')
      const errorCorreoPagos = document.getElementById('error-correo-pagos')
      const errorSitioWeb = document.getElementById('error-sitio-web')
      const errorRubro = document.getElementById('error-rubro')
      const errorTipoOperacion = document.getElementById('error-tipo-operacion')
      const errorTipoTercero = document.getElementById('error-tipo-tercero')
      const errorIdFiscal = document.getElementById('error-id-fiscal')
      const errorAgenteAduanal = document.getElementById('error-agente-aduanal')
      const errorLimiteCreditoMN = document.getElementById('error-limite-credito-MN')
      const errorLimiteCreditoME = document.getElementById('error-limite-credito-ME')
      const errorDiasCredito = document.getElementById('error-dias-credito')
      const errorMontoCredito = document.getElementById('error-monto-credito')
      const errorRetencionIva = document.getElementById('error-retencion-iva')
      const errorRetencionIsr = document.getElementById('error-retencion-isr')
      const errorIvaFrontera = document.getElementById('error-iva-frontera')
      const errorCodigoPostal = document.getElementById('error-codigo-postal')
      const errorPais = document.getElementById('error-pais')
      const errorEstado = document.getElementById('error-estado')
      const errorCiudad = document.getElementById('error-ciudad')
      const errorMunicipio = document.getElementById('error-municipio')
      const errorLocalidad = document.getElementById('error-localidad')
      const errorColonia = document.getElementById('error-colonia')
      const errorCalle = document.getElementById('error-calle')
      const errorNumeroExterior = document.getElementById('error-numero-exterior')
      const errorNumeroInterior = document.getElementById('error-numero-interior')
      const errorBanco = document.getElementById('error-banco')
      const errorCuenta = document.getElementById('error-cuenta')
      const errorMoneda = document.getElementById('error-moneda')
      const errorClabe = document.getElementById('error-clabe')
      const errorBanco2 = document.getElementById('error-banco-2')
      const errorCuenta2 = document.getElementById('error-cuenta-2')
      const errorMoneda2 = document.getElementById('error-moneda-2')
      const errorClabe2 = document.getElementById('error-clabe-2')
      const errorUsarEnPortalProveedores = document.getElementById('error-usar-en-portal-proveedores')
      const errorNoAplicaParaRafaga = document.getElementById('error-no-aplica-para-rafaga')
      const errorNoRelacionarOc = document.getElementById('error-no-relacionar-OC')
      
      // Regular expressions
      const rfcPattern = /^[A-Za-z]{3,4}\d{6}[A-Za-z\d]{3}$/
      const curpPattern = /^[A-Za-z]{4}\d{6}[A-Za-z]{6}[A-Za-z\d]{2}$/
      const telefonoPattern = /^\d{10}$/
      const correoPattern = /^[A-Za-z\d._%+-]+@[A-Za-z\d.-]+\.[A-Za-z]{2,}$/
      const codigoPostalPattern = /^\d{5}$/
      const cuentaPattern = /^\d{10,20}$/
      const clabePattern = /^\d{18}$/

      const handleEsMigracion = (esMigracionValue) => {
        if(esMigracionValue) {
          proveedorNuevoFields.style.display = 'none'
          proveedorMigracionFields.style.display = 'block'
        }
        else {
          proveedorMigracionFields.style.display = 'none'
          proveedorNuevoFields.style.display = 'block'
        }

        empresaOrigen.required = esMigracionValue
        empresaDestino.required = esMigracionValue
        rfcMigracion.required = esMigracionValue

        empresa.required = !esMigracionValue
        tipoAlta.required = !esMigracionValue
        contribuyente.required = !esMigracionValue
        rfc.required = !esMigracionValue
        regimenCapital.required = !esMigracionValue
        nombreFiscal.required = !esMigracionValue
        nombreComercial.required = !esMigracionValue
        regimenFiscal.required = !esMigracionValue
        usoCfdi.required = !esMigracionValue
        telefono1.required = !esMigracionValue
        correoGeneral.required = !esMigracionValue
        correoPagos.required = !esMigracionValue
        rubro.required = !esMigracionValue
        tipoOperacion.required = !esMigracionValue
        tipoTercero.required = !esMigracionValue
        agenteAduanal.required = !esMigracionValue
        limiteCreditoMN.required = !esMigracionValue
        limiteCreditoME.required = !esMigracionValue
        diasCredito.required = !esMigracionValue
        montoCredito.required = !esMigracionValue
        retencionIva.required = !esMigracionValue
        retencionIsr.required = !esMigracionValue
        ivaFrontera.required = !esMigracionValue
        codigoPostal.required = !esMigracionValue
        pais.required = !esMigracionValue
        estado.required = !esMigracionValue
        ciudad.required = !esMigracionValue
        municipio.required = !esMigracionValue
        localidad.required = !esMigracionValue
        colonia.required = !esMigracionValue
        calle.required = !esMigracionValue
        numeroExterior.required = !esMigracionValue
        banco.required = !esMigracionValue
        cuenta.required = !esMigracionValue
        moneda.required = !esMigracionValue
        clabe.required = !esMigracionValue
        constanciaSituacionFiscal.required = !esMigracionValue
        estadoCuentaBancario.required = !esMigracionValue
      }

      // Handling EsMigracion state change
      esMigracion.addEventListener('change', () => {
        handleEsMigracion(esMigracion.checked)
        enableSaveButton()
      })
    
      // Validacion empresa origen
      empresaOrigen.addEventListener('change', () => {
        if (empresaOrigen.value == '') {
          errorEmpresaOrigen.style.display = 'block'
        } else {
          errorEmpresaOrigen.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion empresa destino
      empresaDestino.addEventListener('change', () => {
        if (empresaDestino.value == '') {
          errorEmpresaDestino.style.display = 'block'
        } else {
          errorEmpresaDestino.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion rfc migracion
      rfcMigracion.addEventListener('input', () => {
        if (rfcPattern.test(rfcMigracion.value)) {
          errorRfcMigracion.style.display = 'none'
        } else {
          errorRfcMigracion.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion empresa
      empresa.addEventListener('change', () => {
        if (empresa.value == '') {
          errorEmpresa.style.display = 'block'
        } else {
          errorEmpresa.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion tipo alta
      tipoAlta.addEventListener('change', () => {
        if (tipoAlta.value == '') {
          errorTipoAlta.style.display = 'block'
        } else {
          errorTipoAlta.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion contribuyente
      contribuyente.addEventListener('change', () => {
        if (contribuyente.value == '') {
          errorContribuyente.style.display = 'block'
        } else {
          errorContribuyente.style.display = 'none'

          // Curp is mandatory only for personas físicas
          if(contribuyente.value == 'Persona física') {
            curp.required = true
            curp.disabled = false
          }
          else {
            curp.required = false
            curp.disabled = true
            curp.value = ''
            errorCurp.style.display = 'none'
          }
        }
        enableSaveButton()
      })
      
      // Validacion rfc
      rfc.addEventListener('input', () => {
        if (rfcPattern.test(rfc.value)) {
          errorRfc.style.display = 'none'
        } else {
          errorRfc.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion curp
      curp.addEventListener('input', () => {
        if (curpPattern.test(curp.value)) {
          errorCurp.style.display = 'none'
        } else {
          errorCurp.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion regimen de capital
      regimenCapital.addEventListener('change', () => {
        if (regimenCapital.value == '') {
          errorRegimenCapital.style.display = 'block'
        } else {
          errorRegimenCapital.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion nombre fiscal
      nombreFiscal.addEventListener('input', () => {
        if (nombreFiscal.value == '') {
          errorNombreFiscal.style.display = 'block'
        } else {
          errorNombreFiscal.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion nombre comercial
      nombreComercial.addEventListener('input', () => {
        if (nombreComercial.value == '') {
          errorNombreComercial.style.display = 'block'
        } else {
          errorNombreComercial.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion regimen fiscal
      regimenFiscal.addEventListener('change', () => {
        if (regimenFiscal.value == '') {
          errorRegimenFiscal.style.display = 'block'
        } else {
          errorRegimenFiscal.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion uso cfdi
      usoCfdi.addEventListener('change', () => {
        if (usoCfdi.value == '') {
          errorUsoCfdi.style.display = 'block'
        } else {
          errorUsoCfdi.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion telefono 1
      telefono1.addEventListener('input', () => {
        if (telefonoPattern.test(telefono1.value)) {
          errorTelefono1.style.display = 'none'
        } else {
          errorTelefono1.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion telefono 2
      telefono2.addEventListener('input', () => {
        if (telefono2.value == '' || telefonoPattern.test(telefono2.value)) {
          errorTelefono2.style.display = 'none'
        } else {
          errorTelefono2.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion telefono 2
      telefono2.addEventListener('input', () => {
        if (telefono1.value.length < 10) {
          errorTelefono1.style.display = 'block'
        } else {
          errorTelefono1.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion correo general
      correoGeneral.addEventListener('input', () => {
        if (correoPattern.test(correoGeneral.value)) {
          errorCorreoGeneral.style.display = 'none'
        } else {
          errorCorreoGeneral.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion correo pagos
      correoPagos.addEventListener('input', () => {
        if (correoPattern.test(correoPagos.value)) {
          errorCorreoPagos.style.display = 'none'
        } else {
          errorCorreoPagos.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion rubro
      rubro.addEventListener('change', () => {
        if (rubro.value == '') {
          errorRubro.style.display = 'block'
        } else {
          errorRubro.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion tipo operacion
      tipoOperacion.addEventListener('change', () => {
        if (tipoOperacion.value == '') {
          errorTipoOperacion.style.display = 'block'
        } else {
          errorTipoOperacion.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion agente aduanal
      agenteAduanal.addEventListener('change', () => {
        if (agenteAduanal.value == '') {
          errorAgenteAduanal.style.display = 'block'
        } else {
          errorAgenteAduanal.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion limite credito MN
      limiteCreditoMN.addEventListener('input', () => {
        if (limiteCreditoMN.value == '') {
          errorLimiteCreditoMN.style.display = 'block'
        } else {
          errorLimiteCreditoMN.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion limite credito ME
      limiteCreditoME.addEventListener('input', () => {
        if (limiteCreditoME.value == '') {
          errorLimiteCreditoME.style.display = 'block'
        } else {
          errorLimiteCreditoME.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion dias credito
      diasCredito.addEventListener('input', () => {
        if (diasCredito.value == '') {
          errorDiasCredito.style.display = 'block'
        } else {
          errorDiasCredito.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion monto credito
      montoCredito.addEventListener('input', () => {
        if (montoCredito.value == '') {
          errorMontoCredito.style.display = 'block'
        } else {
          errorMontoCredito.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion retencion iva
      retencionIva.addEventListener('change', () => {
        if (retencionIva.value == '') {
          errorRetencionIva.style.display = 'block'
        } else {
          errorRetencionIva.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion retencion isr
      retencionIsr.addEventListener('change', () => {
        if (retencionIsr.value == '') {
          errorRetencionIsr.style.display = 'block'
        } else {
          errorRetencionIsr.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion iva frontera
      ivaFrontera.addEventListener('change', () => {
        if (ivaFrontera.value == '') {
          errorIvaFrontera.style.display = 'block'
        } else {
          errorIvaFrontera.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion codigo postal
      codigoPostal.addEventListener('input', () => {
        if (codigoPostalPattern.test(codigoPostal.value)) {
          errorCodigoPostal.style.display = 'none'
        } else {
          errorCodigoPostal.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion pais
      pais.addEventListener('input', () => {
        if (pais.value == '') {
          errorPais.style.display = 'block'
        } else {
          errorPais.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion estado
      estado.addEventListener('input', () => {
        if (estado.value == '') {
          errorEstado.style.display = 'block'
        } else {
          errorEstado.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion ciudad
      ciudad.addEventListener('input', () => {
        if (ciudad.value == '') {
          errorCiudad.style.display = 'block'
        } else {
          errorCiudad.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion municipio
      municipio.addEventListener('input', () => {
        if (municipio.value == '') {
          errorMunicipio.style.display = 'block'
        } else {
          errorMunicipio.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion localidad
      localidad.addEventListener('input', () => {
        if (localidad.value == '') {
          errorLocalidad.style.display = 'block'
        } else {
          errorLocalidad.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion colonia
      colonia.addEventListener('input', () => {
        if (colonia.value == '') {
          errorColonia.style.display = 'block'
        } else {
          errorColonia.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion calle
      calle.addEventListener('input', () => {
        if (calle.value == '') {
          errorCalle.style.display = 'block'
        } else {
          errorCalle.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion numero exterior
      numeroExterior.addEventListener('input', () => {
        if (numeroExterior.value == '') {
          errorNumeroExterior.style.display = 'block'
        } else {
          errorNumeroExterior.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion banco
      banco.addEventListener('change', () => {
        if (banco.value == '') {
          errorBanco.style.display = 'block'
        } else {
          errorBanco.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion cuenta
      cuenta.addEventListener('input', () => {
        if (cuentaPattern.test(cuenta.value)) {
          errorCuenta.style.display = 'none'
        } else {
          errorCuenta.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion moneda
      moneda.addEventListener('change', () => {
        if (moneda.value == '') {
          errorMoneda.style.display = 'block'
        } else {
          errorMoneda.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion clabe
      clabe.addEventListener('input', () => {
        if (clabePattern.test(clabe.value)) {
          errorClabe.style.display = 'none'
        } else {
          errorClabe.style.display = 'block'
        }
        enableSaveButton()
      })

      // Añadiendo un segundo banco
      addBanco.addEventListener('click', () => {
        banco2.selectedIndex = 0
        cuenta2.value = ''
        moneda2.selectedIndex = 0
        clabe2.value = ''
        
        if(addBanco.textContent == 'Agregar otro banco') {
          
          errorBanco2.style.display = 'none'
          errorCuenta2.style.display = 'none'
          errorMoneda2.style.display = 'none'
          errorClabe2.style.display = 'none'
          banco2Container.style.display = 'block'

          banco2.required = true
          cuenta2.required = true
          moneda2.required = true
          clabe2.required = true

          addBanco.textContent = 'Eliminar banco'
        }
        else {
          banco2Container.style.display = 'none'

          banco2.required = false
          cuenta2.required = false
          moneda2.required = false
          clabe2.required = false

          addBanco.textContent = 'Agregar otro banco'
        }
        enableSaveButton()
      })
      
      // Validacion banco 2
      banco2.addEventListener('change', () => {
        if (banco2.value == '') {
          errorBanco2.style.display = 'block'
        } else {
          errorBanco2.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion cuenta 2
      cuenta2.addEventListener('input', () => {
        if (cuentaPattern.test(cuenta2.value)) {
          errorCuenta2.style.display = 'none'
        } else {
          errorCuenta2.style.display = 'block'
        }
        enableSaveButton()
      })
      
      // Validacion moneda 2
      moneda2.addEventListener('change', () => {
        if (moneda2.value == '') {
          errorMoneda2.style.display = 'block'
        } else {
          errorMoneda2.style.display = 'none'
        }
        enableSaveButton()
      })
      
      // Validacion clabe 2
      clabe2.addEventListener('input', () => {
        if (clabePattern.test(clabe2.value)) {
          errorClabe2.style.display = 'none'
        } else {
          errorClabe2.style.display = 'block'
        }
        enableSaveButton()
      })

      function enableSaveButton() {
        if(esMigracion.checked) {
          if(errorEmpresaOrigen.style.display == 'block' || errorEmpresaDestino.style.display == 'block' || errorRfcMigracion.style.display == 'block') {
            btnGuardar.disabled = true
          }
          else {
            btnGuardar.disabled = false
          }
        }
        else {
          if(errorEmpresa.style.display == 'block' || errorTipoAlta.style.display == 'block' || errorContribuyente.style.display == 'block' || errorRfc.style.display == 'block' || errorCurp.style.display == 'block' || errorRegimenCapital.style.display == 'block' || errorNombreFiscal.style.display == 'block' || errorNombreComercial.style.display == 'block' || errorRegimenFiscal.style.display == 'block' || errorUsoCfdi.style.display == 'block' || errorRepresentanteLegal.style.display == 'block' || errorTelefono1.style.display == 'block' ||errorTelefono2.style.display == 'block' || errorContacto.style.display == 'block' || errorCorreoGeneral.style.display == 'block' || errorCorreoPagos.style.display == 'block' || errorSitioWeb.style.display == 'block' || errorRubro.style.display == 'block' || errorTipoOperacion.style.display == 'block' || errorIdFiscal.style.display == 'block' || errorAgenteAduanal.style.display == 'block' || errorLimiteCreditoMN.style.display == 'block' || errorLimiteCreditoME.style.display == 'block' || errorDiasCredito.style.display == 'block' || errorMontoCredito.style.display == 'block' || errorRetencionIva.style.display == 'block' || errorRetencionIsr.style.display == 'block' || errorIvaFrontera.style.display == 'block' || errorCodigoPostal.style.display == 'block' || errorPais.style.display == 'block' || errorEstado.style.display == 'block' || errorCiudad.style.display == 'block' || errorMunicipio.style.display == 'block' || errorLocalidad.style.display == 'block' || errorColonia.style.display == 'block' || errorCalle.style.display == 'block' || errorNumeroExterior.style.display == 'block' || errorNumeroInterior.style.display == 'block' || errorBanco.style.display == 'block' || errorCuenta.style.display == 'block' || errorMoneda.style.display == 'block' || errorClabe.style.display == 'block' || errorBanco2.style.display == 'block' || errorCuenta2.style.display == 'block' || errorMoneda2.style.display == 'block' || errorClabe2.style.display == 'block') {
            btnGuardar.disabled = true
          }
          else {
            btnGuardar.disabled = false
          }
        }
      }

      // Si el registro ya existe en otra empresa, se envia directo a sistemas
      btnGuardar.addEventListener('click', () => {
        if (esMigracion.checked) {
          btnGuardar.setAttribute('name', 'finanzas');
        } else {
          btnGuardar.setAttribute('name', 'pendiente');
        }
      })

      handleEsMigracion(esMigracion.checked)
    })
  </script>
{% endblock %}
